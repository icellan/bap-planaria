"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.sortTransactionsForProcessing=void 0;var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray")),getCommandData=function(a){var b=a.out.find(function(a){return"1BAPSuaPnfGnSBM3GLV9yhxUdYe4vGbdMT"===a.s1||"1BAPSuaPnfGnSBM3GLV9yhxUdYe4vGbdMT"===a.s2}),c="OP_RETURN"===b.o0?b.s2:b.s3,d="OP_RETURN"===b.o0?b.s3:b.s4,e="OP_RETURN"===b.o0?b.s4:b.s5,f="OP_RETURN"===b.o0?b.s8:b.s9;return{cmd:c,idKey:d,newAddress:e,previousAddress:f}},sortIds=function(a){var b=Object.keys(a),c=[];return b.forEach(function(b){var d=a[b];1===d.length?c.push(d[0]):function(){for(var a=[],b=0;b<d.length;b++){var e=getCommandData(d[b]),f=e.newAddress,g=e.previousAddress;a.push({newAddress:f,previousAddress:g,i:b})}for(var h=function(b){var c=a.find(function(c){return a[b].previousAddress===c.newAddress});a[b].linksTo=c?c.i:-1},j=0;j<a.length;j++)h(j);a.sort(function(c,a){return c.linksTo===a.linksTo?0:c.linksTo>a.linksTo?1:-1}),a.forEach(function(a){c.push(d[a.i])})}()}),c},sortTransactionsForProcessing=function(a){var b={},c=[];a.forEach(function(a){var d=getCommandData(a),e=d.cmd,f=d.idKey;"ID"===e?(!b[f]&&(b[f]=[]),b[f].push(a)):c.push(a)});var d=sortIds(b);return[].concat((0,_toConsumableArray2["default"])(d),c)};exports.sortTransactionsForProcessing=sortTransactionsForProcessing;